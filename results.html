<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Результат расчета доставки</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
        }
        h1 {
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid #ccc;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f8f8f8;
        }
        .section {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <h1>Результат расчета доставки</h1>

    <!-- Общая информация -->
    <div class="section">
        <h2>Общая введенная информация</h2>
        <p><strong>Вес товара:</strong> <span id="weight">0</span> кг</p>
        <p><strong>Плотность:</strong> <span id="density">0</span></p>
        <p><strong>Стоимость товара:</strong> $<span id="productCost">0</span></p>
    </div>

    <!-- Мешок -->
    <div class="section">
        <h2>Мешок</h2>
        <table>
            <thead>
                <tr>
                    <th>Параметр</th>
                    <th>Быстрое</th>
                    <th>Обычное</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Вес с упаковкой</td>
                    <td id="bagWeightFast">0</td>
                    <td id="bagWeightRegular">0</td>
                </tr>
                <tr>
                    <td>Упаковка</td>
                    <td id="bagPackagingFast">0</td>
                    <td id="bagPackagingRegular">0</td>
                </tr>
                <tr>
                    <td>Разгрузочные работы</td>
                    <td id="bagUnloadFast">0</td>
                    <td id="bagUnloadRegular">0</td>
                </tr>
                <tr>
                    <td><strong>Итого</strong></td>
                    <td id="bagTotalFast">$0.00</td>
                    <td id="bagTotalRegular">$0.00</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Картонные уголки -->
    <div class="section">
        <h2>Картонные уголки</h2>
        <table>
            <thead>
                <tr>
                    <th>Параметр</th>
                    <th>Быстрое авто</th>
                    <th>Обычное авто</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Вес с упаковкой</td>
                    <td id="cornersWeightFast">0</td>
                    <td id="cornersWeightRegular">0</td>
                </tr>
                <tr>
                    <td>Упаковка</td>
                    <td id="cornersPackagingFast">0</td>
                    <td id="cornersPackagingRegular">0</td>
                </tr>
                <tr>
                    <td>Разгрузочные работы</td>
                    <td id="cornersUnloadFast">0</td>
                    <td id="cornersUnloadRegular">0</td>
                </tr>
                <tr>
                    <td><strong>Итого</strong></td>
                    <td id="cornersTotalFast">$0.00</td>
                    <td id="cornersTotalRegular">$0.00</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Деревянный каркас -->
    <div class="section">
        <h2>Деревянный каркас</h2>
        <table>
            <thead>
                <tr>
                    <th>Параметр</th>
                    <th>Быстрое</th>
                    <th>Обычное</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Вес с упаковкой</td>
                    <td id="frameWeightFast">0</td>
                    <td id="frameWeightRegular">0</td>
                </tr>
                <tr>
                    <td>Упаковка</td>
                    <td id="framePackagingFast">0</td>
                    <td id="framePackagingRegular">0</td>
                </tr>
                <tr>
                    <td>Разгрузочные работы</td>
                    <td id="frameUnloadFast">0</td>
                    <td id="frameUnloadRegular">0</td>
                </tr>
                <tr>
                    <td><strong>Итого</strong></td>
                    <td id="frameTotalFast">$0.00</td>
                    <td id="frameTotalRegular">$0.00</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
<script>
    // Функция для получения данных из URL
    function getResultsFromUrl() {
        const urlParams = new URLSearchParams(window.location.search);
        const resultsParam = urlParams.get('results');
        if (!resultsParam) {
            alert("Ошибка: данные не найдены!");
            return null;
        }
        try {
            return JSON.parse(decodeURIComponent(resultsParam));
        } catch (error) {
            console.error('Ошибка при парсинге данных:', error);
            alert("Произошла ошибка при обработке результатов!");
            return null;
        }
    }

    // Получаем данные из URL
    const jsonData = getResultsFromUrl();
    if (!jsonData) {
        // Если данные не получены, прекращаем выполнение
        document.body.innerHTML = "<h1>Ошибка: данные не найдены</h1>";
        throw new Error("Данные не найдены");
    }

    // Функция для заполнения данных
    function fillData(data) {
        // Общая информация
        document.getElementById('weight').textContent = data.общаяИнформация.вес;
        document.getElementById('density').textContent = data.общаяИнформация.плотность;
        document.getElementById('productCost').textContent = data.общаяИнформация.стоимостьТовара;

        // Мешок
        document.getElementById('bagWeightFast').textContent = data.мешок.packedWeight;
        document.getElementById('bagWeightRegular').textContent = data.мешок.packedWeight;
        document.getElementById('bagPackagingFast').textContent = data.мешок.packagingCost;
        document.getElementById('bagPackagingRegular').textContent = data.мешок.packagingCost;
        document.getElementById('bagUnloadFast').textContent = data.мешок.unloadCost;
        document.getElementById('bagUnloadRegular').textContent = data.мешок.unloadCost;
        document.getElementById('bagTotalFast').textContent = `$${data.мешок.totalFast.toFixed(2)}`;
        document.getElementById('bagTotalRegular').textContent = `$${data.мешок.totalRegular.toFixed(2)}`;

        // Картонные уголки
        document.getElementById('cornersWeightFast').textContent = data.углы.packedWeight;
        document.getElementById('cornersWeightRegular').textContent = data.углы.packedWeight;
        document.getElementById('cornersPackagingFast').textContent = data.углы.packagingCost;
        document.getElementById('cornersPackagingRegular').textContent = data.углы.packagingCost;
        document.getElementById('cornersUnloadFast').textContent = data.углы.unloadCost;
        document.getElementById('cornersUnloadRegular').textContent = data.углы.unloadCost;
        document.getElementById('cornersTotalFast').textContent = `$${data.углы.totalFast.toFixed(2)}`;
        document.getElementById('cornersTotalRegular').textContent = `$${data.углы.totalRegular.toFixed(2)}`;

        // Деревянный каркас
        document.getElementById('frameWeightFast').textContent = data.каркас.packedWeight;
        document.getElementById('frameWeightRegular').textContent = data.каркас.packedWeight;
        document.getElementById('framePackagingFast').textContent = data.каркас.packagingCost;
        document.getElementById('framePackagingRegular').textContent = data.каркас.packagingCost;
        document.getElementById('frameUnloadFast').textContent = data.каркас.unloadCost;
        document.getElementById('frameUnloadRegular').textContent = data.каркас.unloadCost;
        document.getElementById('frameTotalFast').textContent = `$${data.каркас.totalFast.toFixed(2)}`;
        document.getElementById('frameTotalRegular').textContent = `$${data.каркас.totalRegular.toFixed(2)}`;
    }

    // Заполняем данные при загрузке страницы
    if (jsonData) {
        fillData(jsonData);
    }
</script>
</body>
</html>
